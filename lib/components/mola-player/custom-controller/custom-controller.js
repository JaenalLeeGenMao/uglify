"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireWildcard(require("react")),_get2=_interopRequireDefault(require("lodash/get")),_reactMarkdown=_interopRequireDefault(require("react-markdown")),_customController=require("./custom-controller.style");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _getRequireWildcardCache=function(){return e},e}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=a?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(o)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,a=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tappingTimer,tappingCount=0,CustomController=function(e){_inherits(r,_react.Component);var t=_createSuper(r);function r(){var e;_classCallCheck(this,r);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return _defineProperty(_assertThisInitialized(e=t.call.apply(t,[this].concat(n))),"state",{qualities:[],subtitles:[],bufferedPercentage:0,isMuteFeedbackHidden:!0,isPlayPauseFeedbackHidden:!0,isSkipFeedbackHidden:!0,isfullscreenFeedbackHidden:!0,skippedDuration:0,cue:{text:"",hidden:!0}}),_defineProperty(_assertThisInitialized(e),"_getElementById",function(t){var r="vpcc-custom-controller-".concat(e.props.id);return document.querySelector("#".concat(r," #").concat(t))}),_defineProperty(_assertThisInitialized(e),"handleFeedbackOnClick",function(){var t=e._getElementById("vpcc-quality"),r=(0,_get2.default)(t,"children[0]",""),a=e._getElementById("vpcc-subtitle"),n=(0,_get2.default)(a,"children[0]","");n&&(n.style.display="none"),r&&(r.style.display="none")}),_defineProperty(_assertThisInitialized(e),"handleKeyboardEvent",function(){e.props.config.keyboardShortcutsEnabled&&(document.onkeyup=function(t){var r=_assertThisInitialized(e),a=r.props.player,n=a&&a.getMediaElement(),i=(0,_get2.default)(e.props,"isPreroll",!1);switch(t.which||t.keyCode){case 37:i||r._seekTo(-10);break;case 38:t.preventDefault(),n.volume=Math.min(1,n.volume+.1);break;case 39:i||r._seekTo(10);break;case 40:t.preventDefault(),n.volume=Math.max(0,n.volume-.1);break;case 70:t.preventDefault(),r._toggleFullscreen();break;case 77:t.preventDefault(),r._toggleMute();break;case 80:t.preventDefault(),r._togglePlayPause();break;default:t.preventDefault()}})}),_defineProperty(_assertThisInitialized(e),"_getQuality",function(){var t=e.props.player;return t&&t.getVariantTracks()||[]}),_defineProperty(_assertThisInitialized(e),"_setQuality",function(t){var r=e.props.player;if(r){var a=e._getQuality();if(a&&a.length>0){var n=a.filter(function(e){return e.id==t})[0];if(n)r.selectVariantTrack(n,!0);else{var i,l=r.getStats(),o=(0,_get2.default)(l,"estimatedBandwidth",0);a.reverse().map(function(e){o>e.bandwidth&&!i&&(r.selectVariantTrack(e,!0),i=e)}),i||r.selectVariantTrack(a[0],!0)}}}}),_defineProperty(_assertThisInitialized(e),"_getSubtitle",function(){var t=e.props.player,r=t&&t.getMediaElement();return t&&Array.from(r.textTracks)||[]}),_defineProperty(_assertThisInitialized(e),"_setSubtitle",function(t){if(e.props.player){var r=e._getSubtitle();if(r&&r.length>1){var a,n=r[t],i=_createForOfIteratorHelper(r);try{for(i.s();!(a=i.n()).done;){var l=a.value;if(n.language==l.language){if(e._updateLocalStorage("player-locale-info",{language:l.language}),l.addEventListener("cuechange",e.handleCueOnChange),l.cues&&l.cues.length>0){var o,c=_createForOfIteratorHelper(l.cues);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.addEventListener("enter",e.handleCueOnEnter),s.addEventListener("exit",e.handleCueOnExit)}}catch(e){c.e(e)}finally{c.f()}}}else if(l.removeEventListener("cuechange",e.handleCueOnChange),l.cues&&l.cues.length>0){var u,d=_createForOfIteratorHelper(l.cues);try{for(d.s();!(u=d.n()).done;){var p=u.value;p.removeEventListener("enter",e.handleCueOnEnter),p.removeEventListener("exit",e.handleCueOnExit)}}catch(e){d.e(e)}finally{d.f()}}}}catch(e){i.e(e)}finally{i.f()}e.setState({cue:{text:"",hidden:!0}})}}}),_defineProperty(_assertThisInitialized(e),"handleCueOnChange",function(t){var r=(0,_get2.default)(t,"target.activeCues",{});r.length>0&&e.setState(function(e){return{cue:_objectSpread(_objectSpread({},e.cue),{},{text:r[0].text})}})}),_defineProperty(_assertThisInitialized(e),"handleCueOnEnter",function(){e.setState(function(e){return{cue:_objectSpread(_objectSpread({},e.cue),{},{hidden:!1})}})}),_defineProperty(_assertThisInitialized(e),"handleCueOnExit",function(){e.setState(function(e){return{cue:_objectSpread(_objectSpread({},e.cue),{},{text:"",hidden:!0})}})}),_defineProperty(_assertThisInitialized(e),"handleQualityFilter",function(){var t=e._getQuality(),r=[],a=[];t.reverse().map(function(e){e.height&&!a.includes(e.height)&&(a.push(e.height),r.push(_objectSpread(_objectSpread({},e),{},{active:!1})))}),r.sort(function(e,t){return t.height-e.height}),r.push({bandwidth:"Auto",width:"Auto",height:"Auto",id:-1,active:!0}),e.setState({qualities:r})}),_defineProperty(_assertThisInitialized(e),"handleSubtitleFilter",function(){var t=e._getSubtitle(),r=(t=t.map(function(t,r){return _objectSpread(_objectSpread({},t),{},{id:r,active:t.language.toLowerCase()==e.props.config.preferredTextLanguage.toLowerCase(),name:t.language?t.label:null})}).filter(function(e){return e.name})).filter(function(e){return e.active})[0],a=[{id:0,active:!r,name:"Off",type:"SRT",kind:"metadata"}].concat(t);e.setState({subtitles:a.reverse()||[]},function(){r&&e._setSubtitle(r.id)})}),_defineProperty(_assertThisInitialized(e),"initEventListeners",function(t){var r=e._getElementById("vpcc-seek"),a=t&&t.isLive();r&&!a&&r.addEventListener("mousemove",e._updateSeekTooltip),(t&&t.getMediaElement()).addEventListener("progress",e._updateBuffer)}),_defineProperty(_assertThisInitialized(e),"_updateBuffer",function(){var t=e.props.player,r=t&&t.getMediaElement(),a=Math.round((0,_get2.default)(r,"duration",0)),n=Math.round((0,_get2.default)(r,"currentTime",0)),i=(0,_get2.default)(r,"buffered",[]);if(a>0)for(var l=0;l<i.length;l++)if(i.start(i.length-1-l)<n){e.setState({bufferedPercentage:i.end(i.length-1-l)/a*100});break}}),_defineProperty(_assertThisInitialized(e),"_formatTime",function(e){var t=isFinite(e)?e:0,r=new Date(1e3*Math.abs(t)).toISOString().substr(11,8),a={hours:r.substr(0,2),minutes:r.substr(3,2),seconds:r.substr(6,2)};return parseInt(a.hours,10)>0?r:"".concat(a.minutes,":").concat(a.seconds)}),_defineProperty(_assertThisInitialized(e),"_updateSeekTooltip",function(t){var r=e.props.player,a=r&&r.getMediaElement(),n=e._getElementById("vpcc-seek"),i=Math.round((0,_get2.default)(a,"duration",0)),l=(0,_get2.default)(e.props,"isPreroll",!1),o=r&&r.isLive();if(a&&!l&&!o){var c=e._getElementById("vpcc-seek-tooltip"),s=Math.round(t.offsetX/t.target.clientWidth*i);n.setAttribute("data-seek",s),c.textContent=e._formatTime(s);var u=a.getBoundingClientRect();e.isFullscreen(),c.style.left="".concat(t.pageX-u.left-.0875*u.height,"px")}}),_defineProperty(_assertThisInitialized(e),"_updateSeekValue",function(t){var r=t.target.value,a=e.props.player,n=a&&a.getMediaElement(),i=(0,_get2.default)(e.props,"isPreroll",!1),l=a&&a.isLive();n&&!i&&!l&&e.props.config.seekBarEnabled&&(e.setState({currentTime:r}),n.currentTime=r)}),_defineProperty(_assertThisInitialized(e),"_updateLocalStorage",function(e,t){try{var r=JSON.parse(localStorage.getItem(e));r?localStorage.setItem(e,JSON.stringify(_objectSpread(_objectSpread({},r),t))):localStorage.setItem(e,JSON.stringify(t))}catch(e){}}),_defineProperty(_assertThisInitialized(e),"_updateVolume",function(t){var r=e.props.player,a=r&&r.getMediaElement();e._getElementById("vpcc-volume");a&&(a.muted&&(a.muted=!1),e.setState({volume:t.target.value}),a.volume=t.target.value,e._updateLocalStorage("player-volume-info",{volume:a.volume,muted:a.muted}))}),_defineProperty(_assertThisInitialized(e),"_toggleMute",function(){var t=e.props.player,r=t&&t.getMediaElement(),a=e._getElementById("vpcc-volume");r&&e.props.config.toggleMuteEnabled&&(e._debounce(function(){var t,n;(r.muted=!r.muted,r.muted)?(tappingCount=0,a.setAttribute("data-volume",a.value),r.volume=0):(tappingCount=0,r.volume=null!==(t=null==a?void 0:null===(n=a.dataset)||void 0===n?void 0:n.volume)&&void 0!==t?t:1);e._updateLocalStorage("player-volume-info",{volume:r.volume,muted:r.muted}),e.setState({isMuteFeedbackHidden:!0})},500),e.setState({isMuteFeedbackHidden:!1}))}),_defineProperty(_assertThisInitialized(e),"_togglePlayPause",function(){var t=e.props.player,r=t&&t.getMediaElement();r&&e.props.config.togglePlayPauseEnabled&&(e._debounce(function(){tappingCount=0,r.paused||r.ended?r.play():r.pause(),e.setState({isPlayPauseFeedbackHidden:!0})},500),e.setState({isPlayPauseFeedbackHidden:!1}))}),_defineProperty(_assertThisInitialized(e),"_toggleFullscreen",function(){var t=e.props.player,r=t&&t.getMediaElement();e.props.config.toggleFullscreenEnabled&&(e._debounce(function(){tappingCount=0,r&&(e.isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():r.parentNode.requestFullscreen?r.parentNode.requestFullscreen():r.parentNode.mozRequestFullScreen?r.parentNode.mozRequestFullScreen():r.parentNode.webkitRequestFullscreen?r.parentNode.webkitRequestFullscreen():r.parentNode.msRequestFullscreen&&r.parentNode.msRequestFullscreen()),e.setState({isfullscreenFeedbackHidden:!0})},500),e.setState({isfullscreenFeedbackHidden:!1}))}),_defineProperty(_assertThisInitialized(e),"isFullscreen",function(){return null!=document.fullscreenElement}),_defineProperty(_assertThisInitialized(e),"_updateQuality",function(t){var r=e.props.player,a=e.state.qualities.map(function(r,a){return r.id===t?(e._setQuality(t),_objectSpread(_objectSpread({},r),{},{active:!0})):_objectSpread(_objectSpread({},r),{},{active:!1})});r&&(e._toggleQualityPopup(),e.setState({qualities:a}))}),_defineProperty(_assertThisInitialized(e),"_toggleQualityPopup",function(){var t=e._getElementById("vpcc-quality"),r=(0,_get2.default)(t,"children[0]","");r&&(r.style.display="grid"===r.style.display?"none":"grid");var a=e._getElementById("vpcc-subtitle"),n=(0,_get2.default)(a,"children[0]","");n&&(n.style.display="none")}),_defineProperty(_assertThisInitialized(e),"_updateSubtitle",function(t){var r=e.props.player,a=e.state.subtitles.map(function(r){return r.id===t&&e._setSubtitle(r.id),_objectSpread(_objectSpread({},r),{},{active:r.id===t})});r&&(e._toggleSubtitlePopup(),e.setState({subtitles:a}))}),_defineProperty(_assertThisInitialized(e),"_toggleSubtitlePopup",function(){var t=e._getElementById("vpcc-subtitle"),r=(0,_get2.default)(t,"children[0]","");r&&(r.style.display="grid"===r.style.display?"none":"grid");var a=e._getElementById("vpcc-quality"),n=(0,_get2.default)(a,"children[0]","");n&&(n.style.display="none")}),_defineProperty(_assertThisInitialized(e),"_seekToLive",function(){var t=e.props.player;if(t){var r=t&&t.getMediaElement();r&&(r.currentTime=t.seekRange().end)}}),_defineProperty(_assertThisInitialized(e),"_seekTo",function(t){var r=e.props.player,a=r&&r.isLive();if(r&&!a){var n=r&&r.getMediaElement();n&&e.props.config.seekBarEnabled&&(n.pause(),e._debounce(function(){n.currentTime+tappingCount*t<0?n.currentTime=0:n.currentTime+tappingCount*t>n.duration?n.currentTime=n.duration:n.currentTime+=tappingCount*t,tappingCount=0,n.play(),e.setState({isSkipFeedbackHidden:!0,skippedDuration:0})},500),e.setState({isSkipFeedbackHidden:!1,skippedDuration:tappingCount*t}))}}),_defineProperty(_assertThisInitialized(e),"_debounce",function(e){clearTimeout(tappingTimer),e&&(tappingCount+=1,tappingTimer=setTimeout(e,500))}),_defineProperty(_assertThisInitialized(e),"_skipVideo",function(e){e&&e.id&&window&&(window.globalHistory?window.globalHistory.push("/watch?v=".concat(e.id,"&autoplay=1")):window.location.href="/watch?v=".concat(e.id,"&autoplay=1"))}),_defineProperty(_assertThisInitialized(e),"renderFeedback",function(){var t=e.props.player,r=t&&t.getMediaElement(),a=(0,_get2.default)(r,"paused",!1),n=(0,_get2.default)(r,"muted",!1),i=e.state,l=i.isMuteFeedbackHidden,o=i.isPlayPauseFeedbackHidden,c=i.isSkipFeedbackHidden,s=i.skippedDuration,u=i.isfullscreenFeedbackHidden;return _react.default.createElement(_customController.Feedback,{onClick:e.handleFeedbackOnClick},!c&&_react.default.createElement("button",null,s>0?"+".concat(s,"s"):"".concat(s,"s")),!o&&_react.default.createElement("button",null,a?"PLAY":"PAUSE"),!l&&_react.default.createElement("button",null,n?"UNMUTE":"MUTED"),!u&&_react.default.createElement("button",{className:"square"},e.isFullscreen()?"EXIT FULLSCREEN":"ENTER FULLSCREEN"))}),_defineProperty(_assertThisInitialized(e),"renderCue",function(){var t=e.state.cue,r=(0,_get2.default)(e.props,"isPreroll",!1),a=(0,_get2.default)(e.props,"isHover",!1);return _react.default.createElement(_react.default.Fragment,null,!t.hidden&&t.text&&!r&&_react.default.createElement(_customController.CueWrapper,{className:"".concat(a?"":"hide")},_react.default.createElement(_reactMarkdown.default,{source:t.text.replace(/-/g,"—"),escapeHtml:!1})))}),e}return _createClass(r,[{key:"componentDidMount",value:function(){var e=this.props.player;process.env.BROWSER&&e&&(this.handleQualityFilter(),this.handleSubtitleFilter(),this.initEventListeners(e),this.handleKeyboardEvent())}},{key:"componentWillUnmount",value:function(){this.props.config.keyboardShortcutsEnabled&&(document.onkeyup=null)}},{key:"render",value:function(){var e=this,t=this.props.player,r=(0,_get2.default)(this.props,"isPreroll",!1),a=t&&t.isLive(),n=t&&t.getMediaElement(),i=(0,_get2.default)(n,"paused",!1),l=isFinite((0,_get2.default)(n,"duration",0))?(0,_get2.default)(n,"duration",0):0,o=isFinite((0,_get2.default)(n,"currentTime",0))?(0,_get2.default)(n,"currentTime",0):0,c=(0,_get2.default)(n,"volume",0),s=(0,_get2.default)(n,"muted",!1),u=this.state,d=u.bufferedPercentage,p=u.qualities,f=u.subtitles,_=a?"100%":"".concat(o/l*100,"%"),m="".concat(o/l*100,"%"),g=a&&r||!a,y=this.props.recommendation;return _react.default.createElement(_react.default.Fragment,null,this.renderFeedback(),this.renderCue(),_react.default.createElement("div",{id:"vpcc-custom-controller-".concat(this.props.id),refs:function(t){return e.rootController=t},className:"".concat(_customController.container," ").concat(this.props.isHover?"":"hide")},_react.default.createElement("div",{className:"duration"},a&&!r&&_react.default.createElement("p",{className:"live_text",onClick:this._seekToLive},"LIVE"),a&&!r&&_react.default.createElement("span",{onClick:this._seekToLive,className:"live_indicator"},_react.default.createElement("div",{className:"live_indicator_beckground"})),g&&this._formatTime(l-o)),_react.default.createElement("div",{className:"progress"},_react.default.createElement("div",{className:"progress_wrapper"},_react.default.createElement("div",{className:"progressbar_progress",style:{width:r?m:_}}),_react.default.createElement("div",{className:"progressbar_progress_buffer",style:{width:"".concat(r?0:d,"%")}}),_react.default.createElement("div",{className:"progressbar_progress_background"}),_react.default.createElement("input",{className:"seek",id:"vpcc-seek",value:o,min:"0",max:l,type:"range",step:"0.01",onChange:this._updateSeekValue}),!a&&!r&&_react.default.createElement("div",{className:"tooltip",id:"vpcc-seek-tooltip"},"00:00"))),_react.default.createElement("div",{className:"bottom_left_section"},_react.default.createElement(_customController.Icons,{className:"".concat(i?"playIcon":"pauseIcon"," ").concat(this.props.config.togglePlayPauseEnabled?"":"disabled"),onClick:this._togglePlayPause},_react.default.createElement("div",{className:"tooltip withTooltip"},i?"Play":"Pause"," (p)")),!a&&!r&&_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_customController.Icons,{className:"forwardIcon ".concat(this.props.config.seekBarEnabled?"":"disabled"),onClick:function(){return e._seekTo(10)}},_react.default.createElement("div",{className:"tooltip withTooltip"},"Forward (⭢)")),_react.default.createElement(_customController.Icons,{className:"backwardIcon ".concat(this.props.config.seekBarEnabled?"":"disabled"),onClick:function(){return e._seekTo(-10)}},_react.default.createElement("div",{className:"tooltip withTooltip"},"Backward (⭠)"))),y&&!r&&_react.default.createElement(_customController.Icons,{className:"upcommingIcon",onClick:function(){return e._skipVideo(y)}},_react.default.createElement("div",{className:"tooltip withTooltip"},"Skip To Next Video")),_react.default.createElement("div",{className:"volume"},_react.default.createElement(_customController.Icons,{id:"volume-button",className:"".concat(s||0==c?"mutedIcon":"muteIcon"," ").concat(this.props.config.toggleMuteEnabled?"":"disabled"),onClick:this._toggleMute},_react.default.createElement("div",{className:"tooltip withTooltip"},s?"Unmute":"Mute"," (m)")),this.props.config.volumeBarEnabled&&_react.default.createElement("div",{className:"progress"},_react.default.createElement("div",{className:"progress_wrapper"},_react.default.createElement("div",{className:"progressbar_progress",style:{width:"".concat(100*c,"%")}},_react.default.createElement("span",{className:"progressbar_dot",style:{opacity:o/l==0?0:1}})),_react.default.createElement("div",{className:"progressbar_progress_background"}),_react.default.createElement(_customController.VolumeBar,null,_react.default.createElement("input",{className:"slider seek",id:"vpcc-volume",value:c,type:"range",max:"1",min:"0",step:"0.01",onChange:this._updateVolume})))))),_react.default.createElement("div",{className:"bottom_right_section"},!r&&p.length>1&&_react.default.createElement(_customController.Icons,{id:"vpcc-quality",className:"gearIcon",onClick:this._toggleQualityPopup},_react.default.createElement("div",{className:"quality_popup"},_react.default.createElement("div",{className:"quality_title"},"Qualities"),p.map(function(t){return _react.default.createElement("div",{className:"quality_list ".concat(t.active?"active":""),onClick:function(){return e._updateQuality(t.id)}},t.active&&_react.default.createElement("div",{className:"quality_tick_wrapper"},_react.default.createElement(_customController.Icons,{className:"tickIcon",onClick:e._toggleQualityPopup})),t.height)}))),!r&&f.length>1&&_react.default.createElement(_customController.Icons,{id:"vpcc-subtitle",className:"chatIcon",onClick:this._toggleSubtitlePopup},_react.default.createElement("div",{className:"subtitle_popup"},_react.default.createElement("div",{className:"subtitle_title"},"Subtitles"),f.map(function(t){return _react.default.createElement(_react.default.Fragment,null,t.name&&_react.default.createElement("div",{className:"subtitle_list ".concat(t.active?"active":""),onClick:function(){return e._updateSubtitle(t.id)}},t.active&&_react.default.createElement("div",{className:"subtitle_tick_wrapper"},_react.default.createElement(_customController.Icons,{className:"tickIcon",onClick:e._toggleSubtitlePopup})),t.name))}))),_react.default.createElement(_customController.Icons,{id:"vpcc-fullscreen",className:"".concat(this.isFullscreen()?"exitFullscreenIcon":"enterFullscreenIcon"," ").concat(this.props.config.toggleFullscreenEnabled?"":"disabled"),onClick:this._toggleFullscreen},_react.default.createElement("div",{className:"tooltip withTooltip"},this.isFullscreen()?"Exit Fullscreen":"Enter Fullscreen"," (f)")))))}}]),r}(),_default=CustomController;exports.default=_default;